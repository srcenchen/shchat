import{s as b,d as fe,m as $,c as O,t as me,b as he,f as C,i as ge,e as A,w as E,o as pe,q as ye,p as be,v as x,x as H,O as xe,P as _e,n as we,y as Se,z as B,A as g,Q as Oe,R as Ce,B as U,D as k,S as I,E as L}from"./index-c87fa417.js";import{a as Te,u as je,F as Pe,B as Ve}from"./const-a831dd10.js";/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */function X(n,e){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),a.push.apply(a,t)}return a}function ze(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X(Object(a),!0).forEach(function(t){b(n,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))})}return n}function Ee(n,e){for(var a=ze({},n),t=0;t<e.length;t++){var u=e[t];delete a[u]}return a}function q(n,e){var a=typeof e=="number";if(!n||n.length===0)return a?{length:0,characters:n}:0;for(var t=0,u=0;u<n.length;u++){var o=0;if(n.charCodeAt(u)>127||n.charCodeAt(u)===94?o=2:o=1,a&&t+o>e)return{length:t,characters:n.slice(0,u)};t+=o}return a?{length:t,characters:n}:t}/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */var Fe={autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:Boolean,maxcharacter:{type:Number},maxlength:{type:Number},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:Boolean,status:{type:String,validator:function(e){return["default","success","warning","error"].includes(e)}},tips:{type:[String,Function]},value:{type:[String,Number]},modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function};/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */var m,De=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,Ne=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Re(n){var e=window.getComputedStyle(n),a=e.getPropertyValue("box-sizing")||e.getPropertyValue("-moz-box-sizing")||e.getPropertyValue("-webkit-box-sizing"),t=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),u=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),o=Ne.map(function(i){return"".concat(i,":").concat(e.getPropertyValue(i))}).join(";");return{sizingStyle:o,paddingSize:t,borderSize:u,boxSizing:a}}function J(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;m||(m=document.createElement("textarea"),document.body.appendChild(m));var t=Re(n),u=t.paddingSize,o=t.borderSize,i=t.boxSizing,v=t.sizingStyle;m.setAttribute("style","".concat(v,";").concat(De)),m.value=n.value||n.placeholder||"";var d=m.scrollHeight,f={};i==="border-box"?d+=o:i==="content-box"&&(d-=u),m.value="";var V=m.scrollHeight-u;if(e!==null){var _=V*e;i==="border-box"&&(_=_+u+o),d=Math.max(_,d),f.minHeight="".concat(_,"px")}if(a!==null){var T=V*a;i==="border-box"&&(T=T+u+o),d=Math.min(T,d)}return f.height="".concat(d,"px"),m.parentNode&&m.parentNode.removeChild(m),m=null,f}/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */function Y(n,e){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),a.push.apply(a,t)}return a}function Ae(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Y(Object(a),!0).forEach(function(t){b(n,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))})}return n}function Z(n){var e={};return Object.keys(n).forEach(function(a){typeof n[a]<"u"&&(e[a]=n[a])}),e}var Be=fe({name:"TTextarea",inheritAttrs:!1,props:Ae({},Fe),setup:function(e,a){var t=a.attrs,u=a.expose,o=$(),i=$("textarea"),v=O(function(){return"".concat(i.value,"__tips")}),d=O(function(){return"".concat(i.value,"__limit")}),f=me(e),V=f.value,_=f.modelValue,T=Te(V,_,e.defaultValue,e.onChange),M=he(T,2),p=M[0],G=M[1],j=je(),P=C({}),h=C(),F=C(!1),D=C(!1),Q=function(){var r;return(r=h.value)===null||r===void 0?void 0:r.focus()},W=function(){var r;return(r=h.value)===null||r===void 0?void 0:r.blur()},w=function(){var r,s;if(e.autosize===!0)P.value=J(h.value);else if(A(e.autosize)==="object"){var c=e.autosize,y=c.minRows,z=c.maxRows;P.value=J(h.value,y,z)}else t.rows?P.value={height:"auto",minHeight:"auto"}:t.style&&(r=h.value)!==null&&r!==void 0&&(s=r.style)!==null&&s!==void 0&&s.height&&(P.value={height:h.value.style.height})},ee=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s=h.value,c=String(r);s&&s.value!==c&&(s.value=c,p.value=c)},K=function(r){var s=r.target,c=s.value;if(e.maxcharacter&&e.maxcharacter>=0){var y=q(c,e.maxcharacter);c=A(y)==="object"&&y.characters}!D.value&&G(c,{e:r}),we(function(){return ee(c)}),w()},te=function(r){K(r)},ae=function(){D.value=!0},ne=function(r){D.value=!1,K(r)},N=function(r,s){var c;if(!j.value){var y="on".concat(r[0].toUpperCase()).concat(r.slice(1));(c=e[y])===null||c===void 0||c.call(e,p.value,{e:s})}},re=function(r){N("keydown",r)},oe=function(r){N("keyup",r)},le=function(r){N("keypress",r)},ie=function(r){var s;w(),!j.value&&(F.value=!0,(s=e.onFocus)===null||s===void 0||s.call(e,p.value,{e:r}))},R=ge(Pe,void 0),ue=function(r){var s;w(),F.value=!1,(s=e.onBlur)===null||s===void 0||s.call(e,p.value,{e:r}),R==null||R.handleBlur()},se=O(function(){var l;return[i.value,(l={},b(l,"".concat(o.value,"-is-disabled"),j.value),b(l,"".concat(o.value,"-is-readonly"),e.readonly),l)]}),ce=O(function(){return Z({autofocus:e.autofocus,disabled:j.value,readonly:e.readonly,placeholder:e.placeholder,maxlength:e.maxlength||void 0,name:e.name||void 0})}),de=O(function(){var l=q(String(p.value||""));return A(l)==="object"?l.length:l});E(function(){return p.value},function(){return w()}),E(h,function(l){l&&w()}),E(function(){return e.autofocus},function(l){l&&h.value.focus()}),E(P,function(l){var r=t.style;xe(h.value,_e(r,l))}),u({focus:Q,blur:W}),pe(function(){w()});var ve=ye();return function(){var l,r=Z({onFocus:ie,onBlur:ue,onKeydown:re,onKeyup:oe,onKeypress:le}),s=be(),c=s.STATUS,y=O(function(){var S;return["".concat(i.value,"__inner"),(S={},b(S,"".concat(o.value,"-is-").concat(e.status),e.status),b(S,c.value.disabled,j.value),b(S,c.value.focused,F.value),b(S,"".concat(o.value,"-resize-none"),e.maxlength),S),"narrow-scrollbar"]}),z=ve("tips");return x("div",H({class:se.value},Ee(t,["style"])),[x("textarea",H({onInput:te,onCompositionstart:ae,onCompositionend:ne,ref:h,value:p.value,class:y.value},r,ce.value),null),e.maxcharacter&&x("span",{class:d.value},["".concat(de.value,"/").concat(e.maxcharacter)]),!e.maxcharacter&&e.maxlength?x("span",{class:d.value},["".concat(p.value?(l=String(p.value))===null||l===void 0?void 0:l.length:0,"/").concat(e.maxlength)]):null,z&&x("div",{class:"".concat(v.value," ").concat(i.value,"__tips--").concat(e.status||"normal")},[z])])}}});/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */var ke=Se(Be);const Ie={class:"flex flex-col items-center p-4 pb-8"},Me={class:"h-full"},Ke=g("tr",null,[g("th",{class:"pr-16 align-center"},"name"),g("th",{class:"pr-16 align-center"},"content"),g("th",{class:"pr-16 align-center"},"date")],-1),$e={class:"align-center mt-2",style:{"word-wrap":"break-word","word-break":"break-all"}},He={class:"align-center mt-2",style:{"word-wrap":"break-word","word-break":"break-all"}},Ue={class:"align-center mt-2",style:{"word-wrap":"break-word","word-break":"break-all"}},Le={class:"w-full flex flex-col justify-center items-center"},Xe={class:"flex mt-4"},Ye={__name:"Chat",setup(n){const e=C([]),a=C("");fetch("/api/getChatList").then(o=>o.json()).then(o=>{e.value=o,window.scrollTo(0,9999999)});function t(){fetch("/api/clearAll").then(o=>o.json()).then(o=>{window.location.reload()})}Date.prototype.Format=function(o){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var v in i)new RegExp("("+v+")").test(o)&&(o=o.replace(RegExp.$1,RegExp.$1.length==1?i[v]:("00"+i[v]).substr((""+i[v]).length)));return o};function u(){const i=new Date().Format("yyyy-MM-ddTHH:mm:ssZ").toLocaleString().replace("/","-").replace("/","-").replace(" ","T").replace(" ","-"),v=new URLSearchParams;v.append("nickname","Ehsan"),v.append("content",a.value),v.append("time",i),fetch("api/addChat",{method:"POST",body:v}).then(d=>d.json()).then(d=>{window.location.reload()})}return(o,i)=>{const v=ke,d=Ve;return k(),B("div",Ie,[g("div",Me,[g("table",null,[Ke,(k(!0),B(Oe,null,Ce(e.value,f=>(k(),B("tr",null,[g("td",$e,I(f.NickName),1),g("td",He,I(f.Content),1),g("td",Ue,I(f.DateTime),1)]))),256))])]),g("div",Le,[x(v,{class:"lg:w-1/3 mt-8",autosize:{minRows:2,maxRows:4},modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=f=>a.value=f)},null,8,["modelValue"]),g("div",Xe,[x(d,{onClick:u},{default:U(()=>[L("Send")]),_:1}),x(d,{onClick:t,class:"ml-2",theme:"danger",variant:"outline"},{default:U(()=>[L("Clear")]),_:1})])])])}}};export{Ye as default};
