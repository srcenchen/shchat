import{s as b,d as fe,m as $,c as O,t as me,b as he,f as C,i as pe,e as B,w as E,o as ge,q as ye,p as be,v as x,x as U,n as xe,O as _e,P as Se,y as we,A as I,B as K,C as m,Q as Oe,R as Ce,D as H,S as R,E as L}from"./index-934f1aca.js";import{a as Te,u as je,F as Pe,B as Ve}from"./const-f582ae5e.js";/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */function X(n,e){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),a.push.apply(a,t)}return a}function ze(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?X(Object(a),!0).forEach(function(t){b(n,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))})}return n}function Ee(n,e){for(var a=ze({},n),t=0;t<e.length;t++){var u=e[t];delete a[u]}return a}function J(n,e){var a=typeof e=="number";if(!n||n.length===0)return a?{length:0,characters:n}:0;for(var t=0,u=0;u<n.length;u++){var l=0;if(n.charCodeAt(u)>127||n.charCodeAt(u)===94?l=2:l=1,a&&t+l>e)return{length:t,characters:n.slice(0,u)};t+=l}return a?{length:t,characters:n}:t}/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */var Fe={autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:Boolean,maxcharacter:{type:Number},maxlength:{type:Number},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:Boolean,status:{type:String,validator:function(e){return["default","success","warning","error"].includes(e)}},tips:{type:[String,Function]},value:{type:[String,Number]},modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function};/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */var f,Ne=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,De=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Ae(n){var e=window.getComputedStyle(n),a=e.getPropertyValue("box-sizing")||e.getPropertyValue("-moz-box-sizing")||e.getPropertyValue("-webkit-box-sizing"),t=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),u=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),l=De.map(function(c){return"".concat(c,":").concat(e.getPropertyValue(c))}).join(";");return{sizingStyle:l,paddingSize:t,borderSize:u,boxSizing:a}}function q(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;f||(f=document.createElement("textarea"),document.body.appendChild(f));var t=Ae(n),u=t.paddingSize,l=t.borderSize,c=t.boxSizing,p=t.sizingStyle;f.setAttribute("style","".concat(p,";").concat(Ne)),f.value=n.value||n.placeholder||"";var d=f.scrollHeight,v={};c==="border-box"?d+=l:c==="content-box"&&(d-=u),f.value="";var V=f.scrollHeight-u;if(e!==null){var _=V*e;c==="border-box"&&(_=_+u+l),d=Math.max(_,d),v.minHeight="".concat(_,"px")}if(a!==null){var T=V*a;c==="border-box"&&(T=T+u+l),d=Math.min(T,d)}return v.height="".concat(d,"px"),f.parentNode&&f.parentNode.removeChild(f),f=null,v}/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */function G(n,e){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),a.push.apply(a,t)}return a}function Be(n){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?G(Object(a),!0).forEach(function(t){b(n,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(a,t))})}return n}function Q(n){var e={};return Object.keys(n).forEach(function(a){typeof n[a]<"u"&&(e[a]=n[a])}),e}var Ie=fe({name:"TTextarea",inheritAttrs:!1,props:Be({},Fe),setup:function(e,a){var t=a.attrs,u=a.expose,l=$(),c=$("textarea"),p=O(function(){return"".concat(c.value,"__tips")}),d=O(function(){return"".concat(c.value,"__limit")}),v=me(e),V=v.value,_=v.modelValue,T=Te(V,_,e.defaultValue,e.onChange),k=he(T,2),g=k[0],Y=k[1],j=je(),P=C({}),h=C(),F=C(!1),N=C(!1),Z=function(){var r;return(r=h.value)===null||r===void 0?void 0:r.focus()},W=function(){var r;return(r=h.value)===null||r===void 0?void 0:r.blur()},S=function(){var r,i;if(e.autosize===!0)P.value=q(h.value);else if(B(e.autosize)==="object"){var s=e.autosize,y=s.minRows,z=s.maxRows;P.value=q(h.value,y,z)}else t.rows?P.value={height:"auto",minHeight:"auto"}:t.style&&(r=h.value)!==null&&r!==void 0&&(i=r.style)!==null&&i!==void 0&&i.height&&(P.value={height:h.value.style.height})},ee=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=h.value,s=String(r);i&&i.value!==s&&(i.value=s,g.value=s)},M=function(r){var i=r.target,s=i.value;if(e.maxcharacter&&e.maxcharacter>=0){var y=J(s,e.maxcharacter);s=B(y)==="object"&&y.characters}!N.value&&Y(s,{e:r}),xe(function(){return ee(s)}),S()},te=function(r){M(r)},ae=function(){N.value=!0},ne=function(r){N.value=!1,M(r)},D=function(r,i){var s;if(!j.value){var y="on".concat(r[0].toUpperCase()).concat(r.slice(1));(s=e[y])===null||s===void 0||s.call(e,g.value,{e:i})}},re=function(r){D("keydown",r)},oe=function(r){D("keyup",r)},le=function(r){D("keypress",r)},ue=function(r){var i;S(),!j.value&&(F.value=!0,(i=e.onFocus)===null||i===void 0||i.call(e,g.value,{e:r}))},A=pe(Pe,void 0),ie=function(r){var i;S(),F.value=!1,(i=e.onBlur)===null||i===void 0||i.call(e,g.value,{e:r}),A==null||A.handleBlur()},ce=O(function(){var o;return[c.value,(o={},b(o,"".concat(l.value,"-is-disabled"),j.value),b(o,"".concat(l.value,"-is-readonly"),e.readonly),o)]}),se=O(function(){return Q({autofocus:e.autofocus,disabled:j.value,readonly:e.readonly,placeholder:e.placeholder,maxlength:e.maxlength||void 0,name:e.name||void 0})}),de=O(function(){var o=J(String(g.value||""));return B(o)==="object"?o.length:o});E(function(){return g.value},function(){return S()}),E(h,function(o){o&&S()}),E(function(){return e.autofocus},function(o){o&&h.value.focus()}),E(P,function(o){var r=t.style;_e(h.value,Se(r,o))}),u({focus:Z,blur:W}),ge(function(){S()});var ve=ye();return function(){var o,r=Q({onFocus:ue,onBlur:ie,onKeydown:re,onKeyup:oe,onKeypress:le}),i=be(),s=i.STATUS,y=O(function(){var w;return["".concat(c.value,"__inner"),(w={},b(w,"".concat(l.value,"-is-").concat(e.status),e.status),b(w,s.value.disabled,j.value),b(w,s.value.focused,F.value),b(w,"".concat(l.value,"-resize-none"),e.maxlength),w),"narrow-scrollbar"]}),z=ve("tips");return x("div",U({class:ce.value},Ee(t,["style"])),[x("textarea",U({onInput:te,onCompositionstart:ae,onCompositionend:ne,ref:h,value:g.value,class:y.value},r,se.value),null),e.maxcharacter&&x("span",{class:d.value},["".concat(de.value,"/").concat(e.maxcharacter)]),!e.maxcharacter&&e.maxlength?x("span",{class:d.value},["".concat(g.value?(o=String(g.value))===null||o===void 0?void 0:o.length:0,"/").concat(e.maxlength)]):null,z&&x("div",{class:"".concat(p.value," ").concat(c.value,"__tips--").concat(e.status||"normal")},[z])])}}});/**
 * tdesign v1.0.4
 * (c) 2023 tdesign
 * @license MIT
 */var Ke=we(Ie);const Re={class:"flex flex-col items-center p-4 h-screen pb-8"},ke={class:"h-full"},Me=m("thead",null,[m("tr",null,[m("th",{class:"pr-16"},"name"),m("th",{class:"pr-16"},"content"),m("th",{class:"pr-16 pl-16"},"date")])],-1),$e={class:"pl-16"},Ue={class:"w-full flex flex-col justify-center items-center"},He={class:"flex mt-4"},Je={__name:"Chat",setup(n){const e=C([]),a=C("");fetch("/api/getChatList").then(l=>l.json()).then(l=>{e.value=l});function t(){fetch("/api/clearAll").then(l=>l.json()).then(l=>{window.location.reload()})}function u(){const c=new Date().toLocaleString().replace("/","-").replace("/","-").replace(" ","T").replace(" ","-"),p=new URLSearchParams;p.append("nickname","Ehsan"),p.append("content",a.value),p.append("time",c),fetch("api/addChat",{method:"POST",body:p}).then(d=>d.json()).then(d=>{window.location.reload()})}return(l,c)=>{const p=Ke,d=Ve;return I(),K("div",Re,[m("div",ke,[m("table",null,[Me,(I(!0),K(Oe,null,Ce(e.value,v=>(I(),K("tr",null,[m("td",null,R(v.NickName),1),m("td",null,R(v.Content),1),m("td",$e,R(v.DateTime),1)]))),256))])]),m("div",Ue,[x(p,{class:"",autosize:{minRows:2,maxRows:4},modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=v=>a.value=v)},null,8,["modelValue"]),m("div",He,[x(d,{onClick:u},{default:H(()=>[L("Send")]),_:1}),x(d,{onClick:t,class:"ml-2",theme:"danger",variant:"outline"},{default:H(()=>[L("Clear")]),_:1})])])])}}};export{Je as default};
